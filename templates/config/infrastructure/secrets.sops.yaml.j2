#| Generated by makejinja - Edit with: task infra:secrets-edit #|
---
# =============================================================================
# Infrastructure Secrets for OpenTofu R2 Backend
# =============================================================================
# This file contains sensitive credentials for infrastructure provisioning.
# After 'task configure', edit with: task infra:secrets-edit
#
# IMPORTANT: These are runtime secrets used by task commands, separate from
# template-time secrets in cluster.yaml.

# -----------------------------------------------------------------------------
# Cloudflare Account
# -----------------------------------------------------------------------------
# Dashboard → Overview → Account ID (right sidebar)
cf_account_id: "CHANGE-ME-cloudflare-account-id"

# -----------------------------------------------------------------------------
# R2 API Credentials (Optional - only for direct S3 API access)
# -----------------------------------------------------------------------------
# Create at: Cloudflare Dashboard → R2 → Manage R2 API Tokens
# Required only if bypassing tfstate-worker for direct R2 access
# r2_access_key_id: "CHANGE-ME-r2-access-key"
# r2_secret_access_key: "CHANGE-ME-r2-secret-key"

# -----------------------------------------------------------------------------
# tfstate-worker Authentication
# -----------------------------------------------------------------------------
# HTTP backend credentials for OpenTofu state storage
# These must match the secrets configured in your tfstate-worker deployment
tfstate_username: "terraform"
tfstate_password: "CHANGE-ME-generate-with-openssl-rand-base64-32"

# -----------------------------------------------------------------------------
# State Encryption (Optional)
# -----------------------------------------------------------------------------
# For client-side state encryption (defense in depth)
# Generate with: openssl rand -base64 32
# state_encryption_passphrase: "CHANGE-ME-strong-passphrase"

#% if infrastructure_enabled %#
# -----------------------------------------------------------------------------
# Proxmox API Credentials
# -----------------------------------------------------------------------------
# Required for VM provisioning with the bpg/proxmox provider
# Create API token: Datacenter → Permissions → API Tokens → Add
# Token format: user@realm!token-name (e.g., root@pam!terraform)
proxmox_api_token_id: "CHANGE-ME-user@pam!terraform"
proxmox_api_token_secret: "CHANGE-ME-api-token-secret"
#% else %#
# -----------------------------------------------------------------------------
# Proxmox API Credentials (Disabled)
# -----------------------------------------------------------------------------
# Infrastructure provisioning not enabled. To enable, add to cluster.yaml:
#   proxmox_api_url: "https://pve.example.com:8006/api2/json"
#   proxmox_node: "pve"
#
# Then re-run 'task configure' and edit this file to add credentials:
# proxmox_api_token_id: "root@pam!terraform"
# proxmox_api_token_secret: "your-api-token-secret"
#% endif %#
