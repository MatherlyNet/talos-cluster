#% if langfuse_enabled | default(false) %#
---
#| ============================================================================= #|
#| LANGFUSE CORE CREDENTIALS                                                     #|
#| NextAuth session, API key salt, and data encryption key                       #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-credentials
  namespace: ai-system
type: Opaque
stringData:
  #| NextAuth secret for session management (256+ entropy) #|
  NEXTAUTH_SECRET: "#{ langfuse_nextauth_secret }#"
  #| Salt for API key hashing (256+ entropy) #|
  SALT: "#{ langfuse_salt }#"
  #| Encryption key for sensitive data (256-bit hex) #|
  ENCRYPTION_KEY: "#{ langfuse_encryption_key }#"
---
#| ============================================================================= #|
#| POSTGRESQL CREDENTIALS                                                        #|
#| Database access for Langfuse transactional data                               #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-postgresql-credentials
  namespace: ai-system
type: kubernetes.io/basic-auth
stringData:
  username: "langfuse"
  password: "#{ langfuse_postgres_password }#"
---
#| ============================================================================= #|
#| CLICKHOUSE CREDENTIALS                                                        #|
#| Analytics database for trace storage                                          #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-clickhouse-credentials
  namespace: ai-system
type: Opaque
stringData:
  password: "#{ langfuse_clickhouse_password }#"
#% if rustfs_enabled | default(false) %#
---
#| ============================================================================= #|
#| S3 CREDENTIALS - RustFS Access for Blob Storage                               #|
#| Event storage, media uploads, batch exports                                   #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-s3-credentials
  namespace: ai-system
type: Opaque
stringData:
  AWS_ACCESS_KEY_ID: "#{ langfuse_s3_access_key }#"
  AWS_SECRET_ACCESS_KEY: "#{ langfuse_s3_secret_key }#"
#% endif %#
#% if langfuse_backup_enabled | default(false) %#
---
#| ============================================================================= #|
#| BACKUP CREDENTIALS - RustFS Access for PostgreSQL Backups                     #|
#| Separate from S3 credentials for bucket-level isolation                       #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-backup-credentials
  namespace: ai-system
type: Opaque
stringData:
  ACCESS_KEY_ID: "#{ langfuse_backup_s3_access_key | default(langfuse_s3_access_key) }#"
  SECRET_ACCESS_KEY: "#{ langfuse_backup_s3_secret_key | default(langfuse_s3_secret_key) }#"
#% endif %#
#% if langfuse_sso_enabled | default(false) %#
---
#| ============================================================================= #|
#| KEYCLOAK SSO CREDENTIALS                                                      #|
#| OIDC client secret for Keycloak authentication                                #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-keycloak-credentials
  namespace: ai-system
type: Opaque
stringData:
  client-secret: "#{ langfuse_keycloak_client_secret }#"
#% endif %#
#% if langfuse_smtp_url | default('') %#
---
#| ============================================================================= #|
#| SMTP CREDENTIALS                                                              #|
#| Email delivery configuration for notifications, invitations, password resets  #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-smtp-credentials
  namespace: ai-system
type: Opaque
stringData:
  SMTP_URL: "#{ langfuse_smtp_url }#"
#% endif %#
#% if dragonfly_acl_enabled | default(false) and dragonfly_langfuse_password | default('') %#
---
#| ============================================================================= #|
#| REDIS/DRAGONFLY ACL CREDENTIALS                                               #|
#| For multi-tenant Dragonfly with ACL-based access control                      #|
#| Uses dragonfly_langfuse_password for namespace isolation (langfuse:* keys)    #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-redis-credentials
  namespace: ai-system
type: Opaque
stringData:
  password: "#{ dragonfly_langfuse_password }#"
#% endif %#
#% if langfuse_init_user_email | default('') and langfuse_init_user_password | default('') and langfuse_init_org_id | default('') %#
---
#| ============================================================================= #|
#| INITIAL ADMIN CREDENTIALS (Headless Initialization)                           #|
#| Bootstrap the first admin account on startup - only used once                 #|
#| REF: https://langfuse.com/self-hosting/headless-initialization                #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: langfuse-init-credentials
  namespace: ai-system
type: Opaque
stringData:
  #| Organization ID - Required, must be valid UUID v4 #|
  LANGFUSE_INIT_ORG_ID: "#{ langfuse_init_org_id }#"
  #| Initial organization name #|
  LANGFUSE_INIT_ORG_NAME: "#{ langfuse_init_org_name | default(cluster_name | default('Langfuse')) }#"
  #| Initial admin user email address #|
  LANGFUSE_INIT_USER_EMAIL: "#{ langfuse_init_user_email }#"
  #| Initial admin password (change via UI after first login) #|
  LANGFUSE_INIT_USER_PASSWORD: "#{ langfuse_init_user_password }#"
  #| Initial admin display name #|
  LANGFUSE_INIT_USER_NAME: "#{ langfuse_init_user_name | default('Admin') }#"
#% endif %#
#% endif %#
