#% if keycloak_enabled | default(false) %#
#| ============================================================================= #|
#| KEYCLOAK REALM SECRETS - Environment variables for keycloak-config-cli       #|
#| Contains sensitive values referenced via $(env:VAR) in realm-config.yaml     #|
#| Standard SOPS-encrypted Secret pattern (encrypted_regex: stringData)         #|
#| REF: https://github.com/adorsys/keycloak-config-cli#variable-substitution    #|
#| ============================================================================= #|
---
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-realm-secrets
  namespace: identity
type: Opaque
stringData:
  #| =========================================================================== #|
  #| OIDC CLIENT SECRETS - Envoy Gateway SSO and Grafana native OAuth           #|
  #| =========================================================================== #|
#% if keycloak_bootstrap_oidc_client | default(false) %#
  #| Envoy Gateway SSO client credentials #|
  OIDC_CLIENT_ID: "#{ oidc_client_id | default('envoy-gateway') }#"
  OIDC_CLIENT_SECRET: "#{ oidc_client_secret }#"
#% endif %#
#% if grafana_oidc_enabled | default(false) %#
  #| Grafana native OAuth client credentials #|
  GRAFANA_CLIENT_ID: "grafana"
  GRAFANA_CLIENT_SECRET: "#{ grafana_oidc_client_secret }#"
#% endif %#
#% if litellm_oidc_enabled | default(false) %#
  #| LiteLLM SSO client credentials #|
  LITELLM_CLIENT_ID: "litellm"
  LITELLM_CLIENT_SECRET: "#{ litellm_oidc_client_secret }#"
#% endif %#
#% if langfuse_sso_enabled | default(false) %#
  #| Langfuse SSO client credentials #|
  LANGFUSE_CLIENT_ID: "langfuse"
  LANGFUSE_CLIENT_SECRET: "#{ langfuse_keycloak_client_secret }#"
#% endif %#
  #| =========================================================================== #|
  #| SOCIAL IDENTITY PROVIDER SECRETS - OAuth credentials for IdP federation    #|
  #| =========================================================================== #|
#% if google_idp_enabled | default(false) %#
  #| Google OAuth credentials #|
  GOOGLE_CLIENT_ID: "#{ google_client_id }#"
  GOOGLE_CLIENT_SECRET: "#{ google_client_secret }#"
#% endif %#
#% if github_idp_enabled | default(false) %#
  #| GitHub OAuth credentials #|
  GITHUB_CLIENT_ID: "#{ github_client_id }#"
  GITHUB_CLIENT_SECRET: "#{ github_client_secret }#"
#% endif %#
#% if microsoft_idp_enabled | default(false) %#
  #| Microsoft Entra ID OAuth credentials #|
  MICROSOFT_CLIENT_ID: "#{ microsoft_client_id }#"
  MICROSOFT_CLIENT_SECRET: "#{ microsoft_client_secret }#"
  #| Tenant ID for Microsoft Entra ID (not a secret but needed for URL construction) #|
  MICROSOFT_TENANT_ID: "#{ microsoft_tenant_id | default('common') }#"
#% endif %#
#% endif %#
