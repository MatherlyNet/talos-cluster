#% if langfuse_enabled | default(false) %#
---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ./helmrepository.yaml
  - ./helmrelease.yaml
  - ./postgresql.yaml
  - ./secret.sops.yaml
  #| ReferenceGrant allows network namespace HTTPRoutes to access Langfuse service #|
  #| HTTPRoute is centralized in network/envoy-gateway/app/httproutes.yaml.j2      #|
  - ./referencegrant.yaml
#% if langfuse_monitoring_enabled | default(false) %#
  - ./servicemonitor.yaml
  - ./dashboard-configmap.yaml
#% endif %#
#% if network_policies_enabled | default(false) %#
  - ./networkpolicy.yaml
#% endif %#
#% if langfuse_scim_sync_enabled | default(false) %#
  #| SCIM role sync CronJob - syncs Keycloak roles to Langfuse #|
  - ./sync-cronjob.yaml
  - ./sync-secret.sops.yaml
  - ./sync-configmap.yaml
#% endif %#
#% endif %#
