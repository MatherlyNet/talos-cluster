#% if keycloak_enabled | default(false) %#
---
#| ============================================================================= #|
#| INITIAL ADMIN CREDENTIALS - Pre-created for Keycloak Operator                 #|
#| ============================================================================= #|
#| The operator checks for this secret BEFORE creating the Keycloak instance.    #|
#| If pre-created with custom credentials, the operator uses them instead of     #|
#| generating random ones. Secret name MUST be: {keycloak-cr-name}-initial-admin #|
#| REF: https://www.keycloak.org/operator/basic-deployment                       #|
#| REF: https://github.com/keycloak/keycloak/issues/9843                         #|
#| ============================================================================= #|
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-initial-admin
  namespace: identity
  labels:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/component: admin-credentials
type: kubernetes.io/basic-auth
stringData:
  username: "admin"
  password: "#{ keycloak_admin_password }#"
---
#| Database credentials for PostgreSQL connection #|
#| Used by both embedded PostgreSQL and CloudNativePG Cluster #|
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-db-secret
  namespace: identity
type: Opaque
stringData:
  username: "#{ keycloak_db_user | default('keycloak') }#"
  password: "#{ keycloak_db_password }#"
#% endif %#
