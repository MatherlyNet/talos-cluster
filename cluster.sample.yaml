---
# -- The network CIDR for the nodes.
# (REQUIRED) / (e.g. 192.168.1.0/24)
node_cidr: ""

# -- DNS servers to use for the cluster.
#    (OPTIONAL) / (DEFAULT: ["1.1.1.1", "1.0.0.1"]) / (Cloudflare DNS)
# node_dns_servers: []

# -- NTP servers to use for the cluster.
#    (OPTIONAL) / (DEFAULT: ["162.159.200.1", "162.159.200.123"]) / (Cloudflare NTP)
# node_ntp_servers: []

# -- The default gateway for the nodes.
#    (OPTIONAL) / (DEFAULT: the first IP in the node_cidr)
# node_default_gateway: ""

# -- Attach a vlan tag to the Talos nodes. Not needed if ports on your switch are tagged or you are not using VLANs.
#    (OPTIONAL) / (REF: https://www.talos.dev/latest/advanced/advanced-networking/#vlans)
# node_vlan_tag: ""

# -- The IP address of the Kube API.
#    (REQUIRED) / (NOTE: Choose an unused IP in node_cidr)
cluster_api_addr: ""

# -- Additional SANs to add to the Kube API cert. This is useful if you want to call the Kube API by hostname rather than IP
#    (OPTIONAL) / (e.g. ["mycluster.example.com"])
# cluster_api_tls_sans: []

# -- The pod CIDR for the cluster, this must NOT overlap with any existing networks and should be a /16 (64K IPs).
#    (OPTIONAL) / (DEFAULT: "10.42.0.0/16")
# cluster_pod_cidr: ""

# -- The service CIDR for the cluster, this must NOT overlap with any existing networks and should be a /16 (64K IPs).
#    (OPTIONAL) / (DEFAULT: "10.43.0.0/16")
# cluster_svc_cidr: ""

# -- The Load balancer IP for k8s_gateway, this provides DNS to all your gateways when split DNS is configured on your internal DNS server (Dnsmasq, Pi-hole, etc)
#    (REQUIRED) / (NOTE: Choose an unused IP in node_cidr)
cluster_dns_gateway_addr: ""

# -- The Load balancer IP for the internal gateway
#    (REQUIRED) / (NOTE: Choose an unused IP in node_cidr)
cluster_gateway_addr: ""

# -- GitHub repository
#    (REQUIRED) / (e.g. "onedr0p/cluster-template")
repository_name: ""

# -- GitHub repository branch
#    (OPTIONAL) / (DEFAULT: "main")
# repository_branch: ""

# -- Repository visibility (public or private)
#    (OPTIONAL) / (DEFAULT: "public") / (NOTE: See the README for information when set private)
# repository_visibility: ""

# -- Domain you wish to use from your Cloudflare account
#    (REQUIRED) / (e.g. "example.com")
cloudflare_domain: ""

# -- API Token for Cloudflare with the 'Zone:DNS:Edit' and 'Account:Cloudflare Tunnel:Read' permissions
#    (REQUIRED) (NOTE: See the README for information on creating this)
cloudflare_token: ""

# -- The Load balancer IP for the external gateway
#    (REQUIRED) / (NOTE: Choose an unused IP in node_cidr)
cloudflare_gateway_addr: ""
# -- The load balancer mode for cilium.
#    (OPTIONAL) / (DEFAULT: "dsr") / (NOTE: accepted values are 'dsr' or 'snat') / (REF: https://docs.cilium.io/en/stable/network/kubernetes/kubeproxy-free/)
# cilium_loadbalancer_mode: ""

# =============================================================================
# CILIUM BGP CONFIGURATION - Optional for multi-VLAN environments
# =============================================================================
# Enable BGP peering between Cilium and your router for dynamic routing.
# This allows LoadBalancer IPs to be advertised via BGP instead of L2/ARP.
#
# When to use BGP:
# - Multi-VLAN environment requiring cross-subnet service access
# - Faster failover needed (~9s with tuned timers vs ARP cache timeout)
# - Source IP preservation with externalTrafficPolicy: Local
#
# Requirements:
# - UniFi gateway with UniFi OS 4.1.13+ (or UXG-Enterprise 4.1.8+)
# - FRR config uploaded to gateway (generated in unifi/bgp.conf after configure)
#
# REF: https://docs.cilium.io/en/stable/network/bgp-control-plane/bgp-control-plane-v2/
# REF: docs/guides/bgp-unifi-cilium-implementation.md

# -- The IP address of the BGP router (your gateway on the node network)
#    (OPTIONAL) / (e.g. "192.168.1.1" or VLAN gateway like "192.168.23.254")
#    NOTE: Use the gateway IP on the same VLAN as your nodes, not the management IP
# cilium_bgp_router_addr: ""

# -- The BGP ASN for your router (use private range 64512-65534)
#    (OPTIONAL) / (e.g. "64513")
# cilium_bgp_router_asn: ""

# -- The BGP ASN for Kubernetes nodes (must differ from router ASN for eBGP)
#    (OPTIONAL) / (e.g. "64514")
# cilium_bgp_node_asn: ""

# -- Dedicated CIDR for LoadBalancer IPs (separate from node_cidr)
#    (OPTIONAL) / (e.g. "172.20.10.0/24")
#    NOTE: If set, update UniFi prefix-list to match this CIDR
# cilium_lb_pool_cidr: ""

# -- BGP Hold Time in seconds (failure detection = 3x keepalive or hold timeout)
#    (OPTIONAL) / (DEFAULT: 30) / (Minimum: 3)
#    NOTE: Lower values = faster failure detection, but more BGP traffic
# cilium_bgp_hold_time: 30

# -- BGP Keepalive Time in seconds (sent every N seconds to peer)
#    (OPTIONAL) / (DEFAULT: 10) / (Minimum: 1)
# cilium_bgp_keepalive_time: 10

# -- Enable BGP Graceful Restart for smoother failover during Cilium restarts
#    (OPTIONAL) / (DEFAULT: false)
#    NOTE: Requires UniFi FRR config to also enable graceful-restart
# cilium_bgp_graceful_restart: false

# -- Graceful Restart timeout in seconds
#    (OPTIONAL) / (DEFAULT: 120)
# cilium_bgp_graceful_restart_time: 120

# -- Maximum ECMP paths for load balancing across advertising nodes
#    (OPTIONAL) / (DEFAULT: 3)
#    NOTE: When multiple nodes advertise the same LoadBalancer IP, traffic is
#    distributed across up to this many paths for better load distribution
# cilium_bgp_ecmp_max_paths: 3

# -- MD5 password for BGP session authentication (RFC 2385)
#    (OPTIONAL) / Must match password configured in UniFi FRR config
#    NOTE: When set, a Kubernetes Secret will be created and referenced by
#    CiliumBGPPeerConfig for TCP MD5 authentication
# cilium_bgp_password: ""

# =============================================================================
# UNIFI DNS INTEGRATION - Optional for internal DNS via external-dns webhook
# =============================================================================
# When configured, replaces k8s_gateway with native UniFi DNS record management.
# Requires UniFi Network v9.0.0+ for API key authentication (current stable: 9.5.21)

# -- The UniFi controller host URL
#    (OPTIONAL) / (e.g. "https://192.168.1.1")
# unifi_host: ""

# -- The UniFi API key for DNS management
#    (OPTIONAL) / (Created in UniFi Admin → Control Plane → Integrations)
# unifi_api_key: ""

# -- The UniFi site identifier
#    (OPTIONAL) / (DEFAULT: "default")
# unifi_site: ""

# -- Whether using non-UDM hardware (Cloud Key, self-hosted controller)
#    (OPTIONAL) / (DEFAULT: false)
# unifi_external_controller: false

# =============================================================================
# TALOS UPGRADE CONTROLLER (tuppr) - Automated OS/K8s upgrades
# =============================================================================
# tuppr manages Talos OS and Kubernetes upgrades through GitOps-driven CRs.
# Update these versions to trigger automated rolling upgrades.

# -- Talos OS version for automated upgrades
#    (OPTIONAL) / (DEFAULT: "1.12.0")
# talos_version: "1.12.0"

# -- Kubernetes version for automated upgrades
#    (OPTIONAL) / (DEFAULT: "1.35.0")
# kubernetes_version: "1.35.0"

# =============================================================================
# TALOS BACKUP - Automated etcd snapshots with S3 storage
# =============================================================================
# Talos Backup creates periodic etcd snapshots and uploads them to S3-compatible
# storage with Age encryption. Required for disaster recovery.

# -- S3-compatible endpoint for backups (Cloudflare R2 recommended)
#    (OPTIONAL) / (e.g. "https://<account-id>.r2.cloudflarestorage.com")
# backup_s3_endpoint: ""

# -- S3 bucket name for backups
#    (OPTIONAL) / (e.g. "cluster-backups")
# backup_s3_bucket: ""

# -- S3 access key ID
#    (OPTIONAL) / (Will be SOPS-encrypted after task configure)
# backup_s3_access_key: ""

# -- S3 secret access key
#    (OPTIONAL) / (Will be SOPS-encrypted after task configure)
# backup_s3_secret_key: ""

# -- Age public key for backup encryption (use same as cluster Age key)
#    (OPTIONAL) / (e.g. "age1...")
# backup_age_public_key: ""

# =============================================================================
# INFRASTRUCTURE (OpenTofu/Proxmox) - Optional for VM deployments
# =============================================================================

# -- Proxmox API endpoint
#    (OPTIONAL) / (e.g. "https://pve.example.com:8006/api2/json")
#    Required only for automated VM provisioning via OpenTofu
# proxmox_api_url: ""

# -- Proxmox node name to create VMs on
#    (OPTIONAL) / (e.g. "pve")
# proxmox_node: ""

# -- Proxmox storage for ISO images
#    (OPTIONAL) / (DEFAULT: "local")
# proxmox_iso_storage: ""

# -- Proxmox storage for VM disks
#    (OPTIONAL) / (DEFAULT: "local-lvm")
# proxmox_disk_storage: ""

# -- Default VM resources (can be overridden per-node in nodes.yaml)
# proxmox_vm_defaults:
#   cores: 4           # CPU cores
#   sockets: 1         # CPU sockets
#   memory: 8192       # Memory in MB
#   disk_size: 128     # Disk size in GB
#
# -- Advanced VM settings (Talos-optimized defaults)
# proxmox_vm_advanced:
#   bios: "ovmf"              # UEFI boot (required for Talos)
#   machine: "q35"            # Modern chipset
#   cpu_type: "host"          # CPU type (host = passthrough)
#   scsi_hw: "virtio-scsi-pci"# SCSI controller
#   balloon: 0                # Memory ballooning disabled (K8s)
#   numa: true                # NUMA enabled
#   qemu_agent: true          # QEMU guest agent
#   net_queues: 4             # Multi-queue networking
#   disk_discard: true        # Enable TRIM/discard
#   disk_ssd: true            # SSD emulation
#   tags: ["kubernetes", "linux", "talos"]  # VM tags
