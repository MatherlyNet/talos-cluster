#% if keycloak_enabled | default(false) %#
---
#| Database credentials for PostgreSQL connection #|
#| NOTE: keycloak-initial-admin is managed by the Keycloak operator, not Flux #|
#| Retrieve generated password: kubectl get secret keycloak-initial-admin -n identity -o jsonpath='{.data.password}' | base64 -d #|
#| Used by both embedded PostgreSQL and CloudNativePG Cluster #|
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-db-secret
  namespace: identity
type: Opaque
stringData:
  username: "#{ keycloak_db_user | default('keycloak') }#"
  password: "#{ keycloak_db_password }#"
#% endif %#
