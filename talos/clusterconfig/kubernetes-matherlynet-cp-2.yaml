version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: vhebg6.k982s6cprawrt8w6
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQakNCOGFBREFnRUNBaEJOWWxoWE1GTlRDWE9XSi9EZW9QUUxNQVVHQXl0bGNEQVFNUTR3REFZRFZRUUsKRXdWMFlXeHZjekFlRncweU5qQXhNRFF4T1RRM05EVmFGdzB6TmpBeE1ESXhPVFEzTkRWYU1CQXhEakFNQmdOVgpCQW9UQlhSaGJHOXpNQ293QlFZREsyVndBeUVBWnpXMGdxQ2N6UXBIZS95REZTWVZSNkRvSFRhWkVhQkxCWmt2Cno4TDVYN2FqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUkKS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVOWRKem55aVRTY09Tb0NhSwo2dTg3WVN2WXhIb3dCUVlESzJWd0EwRUFkbk9Ca3JpTnhSZnVHSm9MRldzdDVISEVlOXU1RXRnRW9yVlZ2UTJICmxTNDB0c3U0aHJBcWVENWc0MCs2VUxzSHo0cWg4d05TSmt4dlF2cGNaRFJqQ0E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0KTUM0Q0FRQXdCUVlESzJWd0JDSUVJSHFUYm0vMzI2NzFsd1E4NW5pNjF3YlZ1ZWpaU3Y1M0pwVmQ5M20za3BZbwotLS0tLUVORCBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0K
  certSANs:
    - 127.0.0.1
    - 192.168.22.100
    - matherlynet.matherly.net
  kubelet:
    image: ghcr.io/siderolabs/kubelet:v1.35.0
    extraConfig:
      serializeImagePulls: false
    defaultRuntimeSeccompProfileEnabled: true
    nodeIP:
      validSubnets:
        - 192.168.20.0/22
    disableManifestsDirectory: true
  network:
    interfaces:
      - deviceSelector:
          hardwareAddr: bc:24:11:62:36:02
        addresses:
          - 192.168.22.102/22
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.23.254
        mtu: 1500
        dhcp: false
        vip:
          ip: 192.168.22.100
    nameservers:
      - 172.64.36.1
      - 172.64.36.2
      - 192.168.1.254
    disableSearchDomain: true
  install:
    diskSelector:
      serial: S4EVNF0M123456
    image: factory.talos.dev/installer-secureboot/ce4c980550dd2ab1b17bbf2b08801c7eb59418eafe8f279833297925d67c7515:v1.12.0
    wipe: false
    grubUseUKICmdline: true
  files:
    - content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
        [plugins."io.containerd.cri.v1.runtime"]
          device_ownership_from_security_context = true
      permissions: 0o0
      path: /etc/cri/conf.d/20-customization.part
      op: create
  time:
    disabled: false
    servers:
      - 162.159.200.1
      - 162.159.200.123
  sysctls:
    fs.inotify.max_user_instances: "8192"
    fs.inotify.max_user_watches: "1048576"
    net.core.rmem_max: "7500000"
    net.core.wmem_max: "7500000"
    net.ipv4.neigh.default.gc_thresh1: "4096"
    net.ipv4.neigh.default.gc_thresh2: "8192"
    net.ipv4.neigh.default.gc_thresh3: "16384"
    net.ipv4.tcp_slow_start_after_idle: "0"
    user.max_user_namespaces: "11255"
  features:
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
        - os:etcd:backup
      allowedKubernetesNamespaces:
        - system-upgrade
        - kube-system
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      forwardKubeDNSToHost: true
  nodeLabels:
    node.kubernetes.io/exclude-from-external-load-balancers: ""
cluster:
  id: qwHxpaIEF7U7GK5NxfI1fpX--6RQ56PBDTtwNcZwTM4=
  secret: xwYw1mruNZvQxk5svb8b9/BYOeLWRA4jfkYhHLJXSEc=
  controlPlane:
    endpoint: https://192.168.22.100:6443
  clusterName: kubernetes
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  token: wmc1oi.mz8gvfah88imahuv
  secretboxEncryptionSecret: tiZMItbz5i57LK6B2UhLajmifJ5pSXEQoxfydBK3kK8=
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpakNDQVRDZ0F3SUJBZ0lSQUlxUVhGZ1Z5ZkFab2NmMDdtdFFNVTB3Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOakF4TURReE9UUTNORFZhRncwek5qQXhNREl4T1RRMwpORFZhTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVNoZ2U5dzlhU3JENlU4OXV5SllyWWFVZGJidytXaFRGTitWaVNVVWt5SVZpZURYRXdOQ3F0aG5VbVIKSWxQWm1qVisrcGljUzBLc0dsZkJhcTA1SnhKdG8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGQzZIaExWanhRMHd2SXliT0hZQ0JvVDJGZFRDTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDSUQxMlRKeUYKUERLcmJqendFY0JvUkdDbXdZSllBRmJLdGtBZUFlcksvV1YyQWlFQXFycEdqODBQZzkvQ1pmeTdxKytrSkxXYwp5eUNtMXZKdWZhMzNwUXB5aGdnPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUFtSHhES1VmY3JLekg0OEp1WTZqYXlUeUJqWXRJMGhod2ZaYWM5akRtbU1vQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFb1lIdmNQV2txdytsUFBic2lXSzJHbEhXMjhQbG9VeFRmbFlrbEZKTWlGWW5nMXhNRFFxcgpZWjFKa1NKVDJabzFmdnFZbkV0Q3JCcFh3V3F0T1NjU2JRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  aggregatorCA:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJYakNDQVFXZ0F3SUJBZ0lRSlgvdHFvY1Q1L2hBRFU3VjhjVS9NakFLQmdncWhrak9QUVFEQWpBQU1CNFgKRFRJMk1ERXdOREU1TkRjME5Wb1hEVE0yTURFd01qRTVORGMwTlZvd0FEQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxRwpTTTQ5QXdFSEEwSUFCUDRDRVBUWnNqaFc0RVZRa2xGeU9lZ2xCV216Vlg1bXhFZEpmMm5pYUF5S2dIT1lmcjVxCkJmSDIzY2JURTUyMmJoeHpHV0QwNzViQWhZZWIycnhkYkorallUQmZNQTRHQTFVZER3RUIvd1FFQXdJQ2hEQWQKQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQVFZSUt3WUJCUVVIQXdJd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZApCZ05WSFE0RUZnUVU1K3lTQVFrWHViaThGb1h2YmJuZGRHRHR1SzR3Q2dZSUtvWkl6ajBFQXdJRFJ3QXdSQUlnClBHZmN3Mi9RRktKU0tTZzg4V1F2Z2tsUGFGY0h4SGpWT2h0bVVWMU9YYzRDSUdTMGVhdmJkSzV2d0RJT1NibkIKUk5rVVJnUDB6SjA1WW40c3NjNlM4Z2RECi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSU01VmF1bExqL1Q4RzZyUFhuTlk1SWpXcHhKSTdzd3U2TW95Q1NTY2xQZnBvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFL2dJUTlObXlPRmJnUlZDU1VYSTU2Q1VGYWJOVmZtYkVSMGwvYWVKb0RJcUFjNWgrdm1vRgo4ZmJkeHRNVG5iWnVISE1aWVBUdmxzQ0ZoNXZhdkYxc253PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  serviceAccount:
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBMnJtN0Q0Szl1bGFMa0U4WlllWWJIaEtpYWluS3hXQ2F2SEtWNVl0ZVpoNThSNWc4Ck15U3JXTnlBUkNLT3FMVEJQWk5weUFQMTNzeGZXWi9PTmErNVhmd1R5VGNWaVVlRTI4VnlJL1dVZENKSVE1S3oKSE5QWGNWcXdJeHN0NlZxWE1qcHJkdTB0ZTZOZkF3WGQyQlZJc1lRUUg2VFRlSlBic2t6MFVHN1l1aGNzUkU5cwprK3k1VnN5c3c2Wnl0R1RWWkN6QWV2Ti9XRzAvZHBKRk9RbDhvNFVmWFF5Ump0ZENwMERVWDVsZThtVDVRcjZ0CmYvVXY5ZnF0MHVOR0lvTlU0bzZFdzF5b0NhU1JrcmtIUVdVUitMczE3Ry93alA0dGlIbVJBSG1JMWVqblVBOGUKeEJkMjBWR1V3cklzbHlnWmtqaHR6VExaaFhiZVo3M3h4ejRJWXBsVEJVYUtvcnU4SURpWjA5TU8xeU03bi9PYwpsRVFleU5LUExaS0ZvTkczNUhBSzBrVVBnVWNCVjIxeEJsajF3czAydmZ3UlVQNytFS3lJK0V4TURpZ01jTWs0CnZpWWVjcEtFTEtuWjFwWndxU1hpdXpjMTNYcWJLT1U3ditZbWxMQmxHK2ZaTC9ydEYyM0F4V3o5VWgwNnFXSXYKT3QwbU4zRnNDb25yOU9MK3d6N1lDNVpENWhiTDBidHRMYWMxc0Q0dXRFdWxrMjRUQUQ4a3FmRjE2aXNubUhGawo4dERWWkFqM0xDaGVTcFNPeG9DeXlXa0pNMldJNVFBMHVXazdacHh1SVZxZkdSYXdZWnJuR20zaExUcXk2c2xqClB5bmc0QUYwS3k3aWEvSkZuTnNYa3piWFFtalNvVDhuM0FpMTc2ZVJzeGZPV3dQbGh0TlhSVkxBbnBFQ0F3RUEKQVFLQ0FnQUdoWnVVZXFkY29Jc0RKUkNuMjN3bDJUNjYzLzhrcm9lVCtlNEtvbGdRdngraE9qZ0ZVR0VabDdoQwp1b01RSXhUN1dJNFlGdUlrZFdueHhWMlpPb3hTUjBZY2JiRGpOSWVRenJlT0VmQmpjWExxZ2p2UldXY1JyQXpDCkp6a25FdnFjMXFMR0JqYkx6OU1iOGN5cnprcXFIR1Y4cnJ0WU1PblA5eEoyanRwQWhrTmRlcjdOUHdyeHZIaE8KL0lOc0ZKdWcrVGY0dlR6OVdTM3N3Njl6dVhBeGZMS0lOdXZrMjA5VFVicTR2N0tBazNrejZuVklSNlV1b1AzQQo0dUpWcDNQY1dPS1FPV1E3VVdCcEx4ZU9kWGM1T0VxREtuMVNQdkZZVEprQnhNaWdsRDdJSTROSDFwUHc2WTFWCmdZbVVna1RDUXVqUjdHTzhZbzhwZnhUd0JpTlZleXFYakd3WE40dExFU1pmSGg0OWpCeFZUQjlmNkY3cmIrVSsKeTA0enNPZktnUHpMMUQzbUdXa0hxRndBTUF1b1A4MExpY052K2VIYndDK1JxYjZONFhPTFJOOE50amdPY0JzawpLM3RQU3hEU1o4K08va1Z5aUNFcEswTnhGdFRkSGUzZEJ1bVRScjN1MElHRE5rZkxSWVZmMk5GUFdhajlMeHdLCmswTFEzeDc0QktrQzVRRFNISDl3QTZMV05EMWNvd0ZNbjlpOHpBNG4vYnlSNDRIUWc0L2FUZFNFdjYrMlRIcVkKekJ3bFZ5bUhmbEsycVhJejlhamc0ckQ1ZmNobE55dGVlbHQ4KytkYkc5c1RVV2FpSzBCV29kdjFTaUFCSHFIMwpDK0ErUENsZDI3MGx5TER3L3QrdzFXVy9NZjdDQ3gwU0xtaDJWTHdRbFpqRjJQWjQ3d0tDQVFFQS92SG1RUVd3Ck1oMS9iYXZtd2pRRjZ2MDhsZEpyNmlQcXIzcVhnaGw1UEtleGpDL1ZqTzRObFpOMS9nQ1djdjBQSmlxUEdsckYKYXJUMGZSOWh1ZzNpbGYzeXhqYmZPVFkvaFA2OWYzckk2WE1qSUw2S0lPV2dHb0NaeEIxOVFkTDJUZmxGYUVoKwp1ZXFUbU5CUUNjZHZOZEIwTnFrSnZBSDE1U0ZlWjNhbnFPcEEydUhJKzdXU3BSTEg4QVJSVTdHQ2pISHZTcHJDClFCSWRiNFduL2lQS1h0bDVZblBmTjRiUmdWV3JmNFlodXlWa2JOa0xwWndsb2hlamJ3T2NKakNvZFplVGNtam8KTzIzSDVMY2JEYm5oOFRjUmVUdm52aHRsRGJ4UDFCUUZwazZzRnFneHNvY283NkM5Ymd5MmtNcUNYcTJOSFJQUgp4ZTZhV3RUZlJ3cmdKd0tDQVFFQTI2RjFiL3ZtcEhPd1FpWStaYzV3RHJXNHA1Q2t5dzZ5TUMyMnVIK3NwUUVVCmRnbE1jMjhSMW5FMlZ0VnUvMERkL2xnQ3dsSEY4VVp0ME1sNnpTcFVMakw5dW1QT1M4NEZxVUFrUW9Xa0plUGwKQUViMGJ3SjQzTFNJNnF3Y2ZBY2V4WmVwOFhyZ3JjZVpyR3F5MnNyMXY3TzlNTW1TRFptRis5VVM0MVJXVnZ5cgpxVHlEaVFSak5jaHQ3NkVnQzFqcm1XeExvaUNoeUxrYzBMb0ZkS01QRnZNK3g5U3VzMHRNblhwdGdaS3c5cnJDCk93bG4rdEJkb0pMSmFFQUw1R2hqUCtSZ3FPdVZoaUUzRDZqZU1RVmErbzNWVUVCQmpmZlhJMExJY2h2SkZiZG0KMzY3SWNLMDlTSFdpYjJsZFEvWXAvUUVQcXducDlob0l2dnhDZmRDR2h3S0NBUUVBN2FOTm5RNVFUbVp3Z1NuYQp6dXJ2R1RzelhmUGw0em5YWi9vOWYyZC9PcXFWTkxiaHQ1dXR6ZDdGL1IxUEg2QUNudkRNc3lRcElHM0w5MVZwCklxUU9zUUVsYXQxNjlUazd2QnczUnJ5TXlnNG9rRDBMUTk3R2ZlMmhac3lXRk9VdjhUNkpFOHQvVkl6elIxM2wKUFRoSTBVQ2RFdFk5M0tGM016MEhZaW1YM2p0OGVJbzliV0t5Ym13ek1lYlVaODd1Z1RzeWNiZ1BtT2xKeHNvdQo3UlV2YlhvSlMxdjJsU3QxM2JpZFF5RWtEKzJxemtzQ01EeDhWN3J3L0duQkExZ1hyb1M3UzhtOXJxZUZ6QXRoCmpFblg4YUFEQ1o1dFJTY0Q2dW04LzFJcWNmcWpMZnRaVjYvazJIaGNHbGgvVkRkdmpoRDNtRU1CSmg1aWdvZ3EKRjI1cndRS0NBUUJpL1RpVENuUC90dXpBUThCbjNrMS9NOFJRTWM4MGZpRXR1Y3piQnlCbkZqK0VtOWhMUnNwQgpYckZoSGIxemFtY2oxY01ZbGdhaklsMG9kMGJUNWJvZlFIZy9ZL0I5RmhSVEhrZTVlOFpxRlhjSFV2T2tmUGJBCmN0WXEvdnV2b3YzcGpOdlpyTXBMU09Vb1lzYk4raUFkRVFPNlUzOXloYmx2c2E5YnFvMW5rMlpEVnJUcU1vSU0Kb1pON0o2SHJ1MTRrdmp5d2pBaWZFVis5YTdvOXdhaHhiWnprTUNXMVJjRDRVVSs5ME1IVjBvTHNYT2J5a3F0QQpUaWhjeGxFVjF6NjBjMWhsaWhqUVpYUU5xTXpNUjEra0FmMGN1SGxUWlZzZjExL0VubVZaVmxvVmd3OXdTWVNQCmZnV0NOWGtGd3BOV0p2NUsxcU1PZXRscVN3UWs5TEZOQW9JQkFHMmowRERiMmxHaHRXMFlhb1I5RW9tN0J5bDIKWUVBOWhBWnBDU0VDVTN1QzVDUlI3M3lvcGFUM1BNYXdMelpHZlVzSzZiR1ZNK3FCUzcrdjBld2xRYTkvcGZlYgpPVUUycVhlc21XSHc4emNTWDhkZDE1RTZGa2VVcER5SVg5OXdqL0xQYis1NjUyUE5LY2dWRnhoMkNPbTR2Uk1QCnJvNFpTaFgvWmZaK3FiaGt6YXJnUkVLeFl6MkJGOTd6TWRlTWdSNDdudUV5NFIrdzlzRDlGdHZJams1bzRqTkMKK3NiNStWUHVWWmRET1R3SGRoNE1WdmIzdGZ1NkRTd09nV21xbEtvT0FCcm5MK2J1T3J0bzRqdzVnZGJUZ29IQQppc1BMUlRCV2tLUkg5U0RIb3JlZ3g0ZWkwV05qcGF4ZHhzZDJ3blhqY085VGVoV0tpSlNTQWYwTlgzdz0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
  apiServer:
    image: registry.k8s.io/kube-apiserver:v1.35.0
    extraArgs:
      enable-aggregator-routing: "true"
    certSANs:
      - 127.0.0.1
      - 192.168.22.100
      - matherlynet.matherly.net
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:v1.35.0
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
    image: registry.k8s.io/kube-proxy:v1.35.0
  scheduler:
    image: registry.k8s.io/kube-scheduler:v1.35.0
    extraArgs:
      bind-address: 0.0.0.0
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: true
      service: {}
  etcd:
    ca:
      crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmVENDQVNPZ0F3SUJBZ0lRUHVmRWhnNzYrVi9pb21mdDZzbUR1VEFLQmdncWhrak9QUVFEQWpBUE1RMHcKQ3dZRFZRUUtFd1JsZEdOa01CNFhEVEkyTURFd05ERTVORGMwTlZvWERUTTJNREV3TWpFNU5EYzBOVm93RHpFTgpNQXNHQTFVRUNoTUVaWFJqWkRCWk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQkFZdFFVclB2WTVBCmI1ei9vSDRHZjlrMUJ2M3Axd0MwOVQycFBjcUhVOU9hZEtVNzB6blF1WlJRQmQ5YUtIRTF5SlF1dmV3Zi93VTEKTnQ4djdUS3BzL1NqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjRApBUVlJS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVdFNyY1RUUTN4TEc2ClYyMjFoUlZEdXJYaXBza3dDZ1lJS29aSXpqMEVBd0lEU0FBd1JRSWhBTmdOd0pDWTk3WGlVUFk0WnJyRlFXNFQKamlPWEk4cktNaVAvUXM5dkVKMHVBaUI2WXBRaTd6cUMvaFRyMjFROC8yUmdDaGtqTEh6RDJnYVNGZmJ0LzFoOQprUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUVSaks5eVBoOXY4L3dRZ1M2ZzJZTm5ERkx2MTR1Ujg2bWZlQzU4ZDMyR01vQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFQmkxQlNzKzlqa0J2blArZ2ZnWi8yVFVHL2VuWEFMVDFQYWs5eW9kVDA1cDBwVHZUT2RDNQpsRkFGMzFvb2NUWElsQzY5N0IvL0JUVTIzeS90TXFtejlBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 192.168.20.0/22
  coreDNS:
    disabled: true
  externalCloudProvider:
    enabled: true
  allowSchedulingOnControlPlanes: false
---
apiVersion: v1alpha1
kind: HostnameConfig
auto: "off"
hostname: matherlynet-cp-2
