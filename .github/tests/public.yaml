---
node_cidr: "10.10.10.0/24"
node_default_gateway: "10.10.10.1"
node_vlan_tag: "100"
# When true, Proxmox handles VLAN tagging (access port mode) - Talos uses direct interface
# When false (default), Talos creates VLAN sub-interfaces (trunk port / bare-metal mode)
# proxmox_vlan_mode: true
cluster_pod_cidr: "10.42.0.0/16"
cluster_svc_cidr: "10.43.0.0/16"
node_dns_servers: ["1.1.1.1"]
node_ntp_servers: ["162.159.200.123"]
cluster_api_addr: "10.10.10.254"
cluster_api_tls_sans: ["example.com"]
cluster_gateway_addr: "10.10.10.252"
cluster_dns_gateway_addr: "10.10.10.253"
repository_name: "MatherlyNet/talos-cluster"
repository_branch: "main"
repository_visibility: "public"
cloudflare_domain: "example.com"
cloudflare_token: "fake"
cloudflare_gateway_addr: "10.10.10.251"
cilium_loadbalancer_mode: "dsr"
cilium_bgp_router_addr: "10.10.1.1"
cilium_bgp_router_asn: "64513"
cilium_bgp_node_asn: "64514"
cilium_lb_pool_cidr: "172.20.10.0/24"
cilium_bgp_hold_time: 30
cilium_bgp_keepalive_time: 10
cilium_bgp_graceful_restart: true
cilium_bgp_graceful_restart_time: 120
cilium_bgp_ecmp_max_paths: 3
cilium_bgp_password: "test-bgp-password"
# UniFi DNS Integration (optional - uncomment to test)
# unifi_host: "https://10.10.10.1"
# unifi_api_key: "test-api-key"
# unifi_site: "default"
# unifi_external_controller: false

# Talos Upgrade Controller (tuppr) - Automated OS/K8s upgrades
talos_version: "1.12.0"
kubernetes_version: "1.35.0"
# Talos Backup (optional - uncomment to test)
# backup_s3_endpoint: "https://test.r2.cloudflarestorage.com"
# backup_s3_bucket: "test-backup"
# backup_s3_access_key: "test-access-key"
# backup_s3_secret_key: "test-secret-key"
# backup_age_public_key: "age1testpublickey00000000000000000000000000000000000000000000"

# Proxmox CSI Configuration (optional - uncomment to test)
# proxmox_csi_enabled: true
# proxmox_endpoint: "https://pve.example.com:8006"
# proxmox_csi_token_id: "kubernetes-csi@pve!csi"
# proxmox_csi_token_secret: "test-csi-secret"
# proxmox_csi_storage: "local-zfs"
# proxmox_region: "pve"

# Proxmox CCM Configuration (optional - uncomment to test)
# NOTE: Mutually exclusive with Talos CCM
# proxmox_ccm_enabled: true
# proxmox_ccm_token_id: "kubernetes-ccm@pve!ccm"
# proxmox_ccm_token_secret: "test-ccm-secret"

# Observability Configuration (optional - uncomment to test)
# monitoring_enabled: true
# monitoring_stack: "prometheus"  # kube-prometheus-stack
# hubble_enabled: true
# hubble_ui_enabled: true
# grafana_subdomain: "grafana"
# grafana_admin_user: "admin"
# grafana_admin_password: "test-password-min8"
# metrics_retention: "7d"
# metrics_storage_size: "50Gi"
# storage_class: "local-path"
# monitoring_alerts_enabled: true
# node_memory_threshold: 90
# node_cpu_threshold: 90
# loki_enabled: true
# logs_retention: "7d"
# logs_storage_size: "50Gi"
# tracing_enabled: true
# tracing_sample_rate: 10
# trace_retention: "72h"
# trace_storage_size: "10Gi"
# cluster_name: "matherlynet"
# observability_namespace: "monitoring"
# environment: "production"

# OIDC/JWT Configuration (optional - uncomment to test SecurityPolicy)
# oidc_provider_name: "keycloak"
# oidc_issuer_url: "https://auth.example.com/realms/myrealm"
# oidc_jwks_uri: "https://auth.example.com/realms/myrealm/protocol/openid-connect/certs"
# oidc_additional_claims:
#   - name: "preferred_username"
#     header: "X-Username"

# VolSync PVC Backup (optional - uncomment to test)
# REF: docs/guides/k8s-at-home-remaining-implementation.md
# volsync_enabled: true
# volsync_s3_endpoint: "https://test.r2.cloudflarestorage.com"
# volsync_s3_bucket: "test-volsync"
# volsync_restic_password: "test-restic-password"
# volsync_schedule: "0 */6 * * *"
# volsync_copy_method: "Clone"
# volsync_retain_daily: 7
# volsync_retain_weekly: 4
# volsync_retain_monthly: 3

# External Secrets Operator (optional - uncomment to test)
# REF: docs/guides/k8s-at-home-remaining-implementation.md
# external_secrets_enabled: true
# external_secrets_provider: "1password"
# onepassword_connect_host: "http://onepassword-connect:8080"

# CiliumNetworkPolicies (optional - uncomment to test)
# REF: docs/research/cilium-network-policies-jan-2026.md
# network_policies_enabled: true
# network_policies_mode: "audit"  # or "enforce"

# RustFS Shared Object Storage (optional - uncomment to test)
# REF: docs/research/rustfs-shared-storage-loki-simplescalable-jan-2026.md
# NOTE: RustFS does NOT support 'mc admin' commands for user/policy management.
#       Loki access keys must be created manually via RustFS Console UI.
#       Tempo uses local filesystem storage, not RustFS/S3.
# rustfs_enabled: true
# rustfs_replicas: 1
# rustfs_data_volume_size: "20Gi"
# rustfs_log_volume_size: "1Gi"
# rustfs_access_key: "rustfsadmin"
# rustfs_secret_key: "test-secret-key"
# loki_s3_access_key: "PLACEHOLDER_CREATE_IN_RUSTFS_CONSOLE"
# loki_s3_secret_key: "test-loki-secret"

# CloudNativePG Operator (optional - uncomment to test)
# REF: docs/guides/cnpg-implementation.md
# NOTE: Shared infrastructure dependency for Keycloak and database-backed apps
# cnpg_enabled: true
# cnpg_postgres_image: "ghcr.io/cloudnative-pg/postgresql:18.1-standard-trixie"
# cnpg_storage_class: "local-path"
# cnpg_priority_class: "system-cluster-critical"
# cnpg_control_plane_only: true
# CNPG backups require rustfs_enabled: true
# cnpg_backup_enabled: false
# cnpg_s3_access_key: "test-cnpg-access"
# cnpg_s3_secret_key: "test-cnpg-secret"
# pgvector extension for AI/ML workloads
# cnpg_pgvector_enabled: false
# cnpg_pgvector_image: "ghcr.io/cloudnative-pg/pgvector:0.8.1-18-trixie"
# cnpg_pgvector_version: "0.8.1"

# Keycloak OIDC Provider (optional - uncomment to test)
# REF: docs/guides/keycloak-implementation.md
# NOTE: Provides OIDC authentication for JWT and OIDC SecurityPolicies
# keycloak_enabled: true
# keycloak_subdomain: "auth"
# keycloak_realm: "matherlynet"
# keycloak_admin_password: "test-admin-password"
# keycloak_db_mode: "embedded"  # "embedded" or "cnpg"
# keycloak_db_user: "keycloak"
# keycloak_db_password: "test-db-password"
# keycloak_db_name: "keycloak"
# keycloak_db_instances: 1
# keycloak_replicas: 1
# keycloak_storage_size: "5Gi"
# keycloak_operator_version: "26.5.0"
# Keycloak Backup (requires rustfs_enabled: true)
# keycloak_s3_access_key: "test-keycloak-access"
# keycloak_s3_secret_key: "test-keycloak-secret"
# keycloak_backup_schedule: "0 2 * * *"
# keycloak_backup_retention_days: 7
# Keycloak OpenTelemetry Tracing (requires tracing_enabled: true)
# keycloak_tracing_enabled: true
# keycloak_tracing_sample_rate: "0.1"
